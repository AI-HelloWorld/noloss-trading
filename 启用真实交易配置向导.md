# 启用真实交易配置向导

## 📋 准备工作清单

### 第一步：获取AsterDEX API密钥

#### 1.1 登录AsterDEX
- 访问：https://www.asterdex.com
- 登录您的账户

#### 1.2 进入API管理
- 导航到：账户设置 → API管理
- 或直接访问：https://www.asterdex.com/account/api

#### 1.3 创建API密钥

**重要权限设置：**
```
✅ 勾选：读取账户信息
✅ 勾选：现货交易
✅ 勾选：合约交易
❌ 不要勾选：提现权限（重要！）
❌ 不要勾选：转账权限
```

**IP白名单（推荐）：**
- 如果知道服务器IP，建议设置
- 提高安全性

#### 1.4 保存密钥

**您会获得：**
```
API Key: 55f5fb7544a1b2c3d4e5f6789...
API Secret: abc123def456ghi789jkl012...
```

⚠️ **重要：API Secret只显示一次，请立即保存！**

---

### 第二步：检查钱包余额

#### 2.1 查看余额
- 登录AsterDEX
- 导航到：钱包 → 现货账户
- 查看USDT余额

#### 2.2 确认可用资金
```
问题1: 您的USDT余额是多少？
问题2: 您准备用多少资金进行AI交易？
```

**建议：**
- 首次测试：$100-$500
- 正式交易：$1,000-$5,000
- 大额交易：$5,000+

---

### 第三步：风险确认

请确认您理解以下风险：

- [ ] 我理解加密货币交易有高风险
- [ ] 我使用的是可承受损失的资金
- [ ] 我理解可能损失全部投资
- [ ] 我知道AI不保证盈利
- [ ] 我准备好监控系统运行
- [ ] 我设置了合理的风险参数

---

## 🔐 提供信息的方式

### 方式1：直接提供（安全环境下）

**格式：**
```
API Key: 您的完整API Key
API Secret: 您的完整API Secret
初始资金: $500
风控偏好: 保守
```

### 方式2：我创建配置文件，您填写

我会创建一个加密的配置文件，您填写后我帮您配置。

---

## ⚙️ 配置流程预览

当您提供信息后，我会执行以下步骤：

### 步骤1: 配置API密钥（1分钟）

```python
# 修改 backend/exchanges/aster_dex.py
self.use_mock_data = False  # 启用真实模式
```

```env
# 创建/更新 .env 文件
ASTER_DEX_API_KEY=您的API_Key
ASTER_DEX_API_SECRET=您的API_Secret
INITIAL_BALANCE=您指定的金额
```

### 步骤2: 测试API连接（2分钟）

```python
# 运行连接测试
test_api_connection()
  ✅ 测试API认证
  ✅ 查询账户余额
  ✅ 查询持仓信息
  ✅ 验证市场数据
```

### 步骤3: 验证钱包余额（1分钟）

```python
# 查询真实钱包余额
balance = get_account_balance()
print(f"USDT余额: ${balance['USDT']}")
print(f"可用余额: ${balance['free']}")
print(f"冻结余额: ${balance['locked']}")
```

### 步骤4: 小额测试交易（5分钟）

```python
# 执行一笔小额测试交易（$10-20）
test_trade()
  ✅ 买入小额BTC
  ✅ 验证订单执行
  ✅ 检查余额更新
  ✅ 确认数据同步
```

### 步骤5: 启用自动交易（1分钟）

```python
# 确认测试成功后启用
ENABLE_AUTO_TRADING=True
restart_backend()
```

### 步骤6: 监控系统（持续）

```python
# 设置监控
watch_portfolio()
  ✅ 实时余额
  ✅ 持仓变化
  ✅ 交易日志
  ✅ AI决策
```

---

## 🛡️ 安全措施

### 配置前的安全检查

**API权限检查：**
```
✅ 只开启交易权限
❌ 提现权限必须关闭
❌ 转账权限必须关闭
✅ IP白名单已设置（推荐）
```

**风控参数检查：**
```
✅ MAX_WALLET_USAGE=0.5（50%限制）
✅ MARGIN_RESERVE_RATIO=0.3（70%保证金）
✅ RISK_THRESHOLD=0.7（风险阈值）
✅ 最小交易$10
```

**初始配置建议（保守）：**
```env
INITIAL_BALANCE=500.0               # 从$500开始
MAX_WALLET_USAGE=0.3                # 单笔最多30%
MARGIN_RESERVE_RATIO=0.2            # 合约只用20%
MAX_POSITION_SIZE=0.05              # 最大仓位5%
ENABLE_AUTO_TRADING=true
```

---

## 📊 真实交易与模拟交易对比

| 项目 | 模拟模式（当前） | 真实模式（配置后） |
|------|-----------------|-------------------|
| **资金** | 模拟$1,000 | 您的真实USDT |
| **交易** | 模拟执行 | 真实执行 ✅ |
| **价格** | 真实市场价格 | 真实市场价格 |
| **盈亏** | 模拟盈亏 | 真实盈亏 ✅ |
| **风险** | 零风险 | 真实风险 ⚠️ |
| **余额检测** | 模拟余额 | 钱包实时余额 ✅ |
| **订单** | 模拟订单 | 真实订单 ✅ |

---

## ⏱️ 配置时间估算

```
提供信息: 您的时间
    ↓
API配置: 1分钟
    ↓
连接测试: 2分钟
    ↓
余额验证: 1分钟
    ↓
测试交易: 5分钟
    ↓
启用自动: 1分钟
    ↓
开始监控: 持续

总计: 约10-15分钟完成配置
```

---

## 🎯 下一步

### 请提供以下信息：

**必需：**
1. ✅ **AsterDEX API Key**
2. ✅ **AsterDEX API Secret**
3. ✅ **确认风险理解**

**可选：**
4. 钱包USDT余额（我会帮您查询）
5. 初始交易金额偏好
6. 风控参数偏好（保守/平衡/激进）

**提供格式示例：**
```
API Key: 55f5fb7544a1b2c3d4e5...
API Secret: abc123def456ghi789...
初始资金: $500
风控: 保守
```

---

## ⚠️ 重要提醒

**在提供API密钥前：**

1. ✅ 确认已关闭提现权限
2. ✅ 确认资金可承受损失
3. ✅ 理解交易风险
4. ✅ 准备好监控系统

**真实交易风险：**
- 市场可能快速波动
- 可能短时间内亏损
- 需要定期监控
- AI决策不保证盈利

**建议：**
- 从小额开始（$100-$500）
- 观察3-7天表现
- 逐步增加资金
- 保持理性判断

---

**准备好后，请提供API密钥，我立即为您配置！** 🚀

**配置完成后，系统将：**
- ✅ 连接您的真实钱包
- ✅ 实时检测余额
- ✅ 执行真实交易
- ✅ 产生真实盈亏

我随时准备帮您配置！

